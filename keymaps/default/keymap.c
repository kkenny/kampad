#include QMK_KEYBOARD_H
#include <stdio.h>

/*
enum layers {
    _BL,
    _DRE,
    _DRC,
    _FN
};
*/

#define _BL   0
#define	_DRE  1
#define	_DRC  2
#define _SHIFT_1  3
#define _NUMPAD   4


uint8_t prev = _BL;
uint32_t desiredmode = 4;
uint16_t hue = 148;
uint16_t sat = 200;
uint16_t val = 255;

// Does something to grab the RGB LED values to retain when switching layers.

void get_hsv(void) {
   hue = rgblight_get_hue();
   sat = rgblight_get_sat();
   val = rgblight_get_val();
}

void reset_hsv(void) {
   rgblight_sethsv(hue, sat, val);
}

void matrix_init_user() {
   //rgblight_mode(desiredmode);
   //reset_hsv();
   rgblight_enable();
   rgblight_mode(4);
   rgblight_sethsv(148, 200, 255);
}


/*
enum custom_keycodes {
    KC_DBL0 = SAFE_RANGE,
};
*/

const uint16_t PROGMEM keymaps[][MATRIX_ROWS][MATRIX_COLS] = {
  [_BL] = KAM_LAYOUT(
    TO(_DRE),	      KC__VOLUP,	    KC__VOLDOWN,  KC_ESC,
    XXXXXXX,	      KC_MEDIA_PREV_TRACK,  KC_MPLY,	  KC_MEDIA_NEXT_TRACK,
    LCMD(KC_E),	      LCMD(KC_SPC),	    LCMD(KC_L),   LCMD(KC_EQUAL),
    LCMD(KC_D),	      LCMD(KC_C),	    LCMD(KC_V),   LCMD(KC_MINUS)
  ),

  [_DRE] = KAM_LAYOUT(
    TO(_DRC),	      _______,		    _______,	  LSFT(KC_4),
    KC_BSPACE,	      KC_COMMA,		    KC_DOT,	  LCMD(KC_S),
    LCMD(KC_BSLASH),  LSFT(KC_DEL),	    LCMD(KC_T),	  _______,
    KC_J,	      KC_L,		    KC_SPC,	  _______
  ),

  [_DRC] = KAM_LAYOUT(
    TO(_NUMPAD),      _______,		    _______,	  LSFT(KC_6),
    _______,	      XXXXXXX,		    LALT(KC_D),	  _______,
    SCMD(KC_W),	      XXXXXXX,		    LCMD(KC_D),	  LSFT(KC_D),
    LSA(KC_S),	      LALT(KC_S),	    KC_J,	  KC_SPC
  ),

  [_SHIFT_1] = KAM_LAYOUT(
    KC_D,	      XXXXXXX,		    LSFT(KC_D),   LALT(KC_X),
    SCMD(KC_A),	      KC_I,		    KC_O,	  KC_M,
    XXXXXXX,	      XXXXXXX,		    XXXXXXX,	  XXXXXXX,
    XXXXXXX,	      XXXXXXX,		    LCMD(KC_Z),	  LSFT(KC_H)
  ),

  [_NUMPAD] = KAM_LAYOUT(
    TO(_BL),	      KC_P0,		    KC_KP_SLASH,  KC_KP_ASTERISK,
    KC_P7,	      KC_P8,		    KC_P9,	  KC_KP_MINUS,
    KC_P4,	      KC_P5,		    KC_P6,	  KC_KP_PLUS,
    KC_P1,	      KC_P2,		    KC_P3,	  KC_KP_ENTER
  ),
};

#ifdef OLED_DRIVER_ENABLE


void oled_task_user(void) {

//      static const char PROGMEM qmk_logo[] = {
  static const char qmk_logo [] PROGMEM = {
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x40, 0x20, 0xb0, 0xd0, 0x58, 0x48, 0x68, 0x28, 0x28,
    0x28, 0x28, 0x48, 0x48, 0xc8, 0x90, 0x10, 0x20, 0x60, 0xc0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0xe0, 0x30, 0xf8, 0xff, 0x0d, 0x06, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x80, 0xe0, 0x3f, 0x1c, 0x18, 0x98, 0x98, 0x3f, 0xf0, 0x80, 0x00, 0x00, 0x00,
    0x00, 0xfc, 0xfc, 0xfc, 0xfc, 0xf0, 0xf8, 0xfc, 0xfc, 0x3c, 0x1c, 0x0c, 0x00, 0x00, 0x00, 0xc0,
    0xf0, 0xfc, 0xfc, 0xfc, 0xfc, 0xf0, 0x80, 0x00, 0x00, 0x00, 0xfc, 0xfc, 0xec, 0xfc, 0xf0, 0xe0,
    0xc0, 0xe0, 0xf0, 0xfc, 0xec, 0xfc, 0xfc, 0xfc, 0x00, 0xfc, 0xfc, 0xfc, 0xfc, 0x3c, 0xfc, 0xfc,
    0xfc, 0xf8, 0xf0, 0x00, 0x00, 0x80, 0xe0, 0xfc, 0xfc, 0xfc, 0xfc, 0xf8, 0xc0, 0x00, 0x00, 0x00,
    0xfc, 0xfc, 0xfc, 0xfc, 0x3c, 0x3c, 0x3c, 0xfc, 0xf8, 0xf8, 0xe0, 0x80, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x1f, 0x38, 0xff, 0x00, 0x06, 0x0e, 0x00, 0x00, 0x0c, 0x1e, 0x0e, 0x0e, 0x07, 0x00,
    0x00, 0x00, 0x00, 0x07, 0x3f, 0x20, 0x60, 0x40, 0x47, 0x6f, 0xe0, 0xff, 0x0f, 0x00, 0x00, 0x00,
    0x00, 0x7f, 0x7f, 0x7d, 0x7f, 0x0f, 0x1f, 0x3f, 0x7f, 0x7e, 0x78, 0x70, 0x40, 0x78, 0x7e, 0x7f,
    0x7f, 0x3f, 0x3f, 0x3f, 0x3f, 0x7f, 0x7f, 0x7e, 0x70, 0x40, 0x7f, 0x7f, 0x7f, 0x7f, 0x07, 0x1f,
    0x3f, 0x1f, 0x07, 0x7f, 0x7f, 0x7f, 0x7f, 0x3f, 0x00, 0x7f, 0x7f, 0x7f, 0x7f, 0x0f, 0x0f, 0x07,
    0x07, 0x03, 0x01, 0x60, 0x7c, 0x7f, 0x7f, 0x3f, 0x3f, 0x39, 0x3f, 0x3f, 0x7f, 0x7f, 0x78, 0x60,
    0x7f, 0x7f, 0x7f, 0x7f, 0x78, 0x78, 0x7c, 0x3f, 0x3f, 0x1f, 0x0f, 0x01, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x1f, 0x1c, 0x0c, 0x06, 0x0c, 0x08, 0x18, 0x0c, 0x04, 0x04, 0x0c, 0x18,
    0x18, 0x0c, 0x04, 0x0c, 0x08, 0x18, 0x08, 0x0c, 0x04, 0x0c, 0x1f, 0x1f, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
  };

  static const char resolve_edit_logo [] PROGMEM = {
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x40, 0x20, 0x10, 0x40, 0x08, 0x10, 0x44,
    0x88, 0xa4, 0x84, 0x50, 0x84, 0x08, 0x28, 0x80, 0x10, 0x20, 0x20, 0x80, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xe0, 0xe0, 0xe0, 0xe0, 0xe0, 0xf0, 0xf0, 0x70, 0xf8, 0x70,
    0x60, 0x00, 0x00, 0xe0, 0xe0, 0xe0, 0xe0, 0xe0, 0xf0, 0xf0, 0x70, 0xf0, 0xf0, 0xe0, 0xc0, 0x00,
    0x00, 0x00, 0xf0, 0xf0, 0xf0, 0xf0, 0x60, 0x00, 0x00, 0x80, 0x80, 0x80, 0xc0, 0xc0, 0xe0, 0xe0,
    0xe0, 0xf0, 0xf0, 0xf8, 0xf0, 0xe0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0xa0, 0x0c, 0x42, 0x00, 0x14, 0x41, 0x10, 0x84, 0x09, 0x20, 0x8f,
    0x3a, 0x57, 0xfa, 0x6d, 0x37, 0x0a, 0x10, 0x42, 0x08, 0x21, 0x84, 0x10, 0x81, 0x12, 0x44, 0x90,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xff, 0xff, 0xff, 0xff, 0x01, 0x80, 0x00, 0x80, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x5b, 0xff, 0xff, 0xff, 0x01, 0x00, 0x00, 0xe0, 0xfe, 0xff, 0xff, 0x3f, 0x03,
    0x00, 0x00, 0xdf, 0xff, 0xff, 0xff, 0x55, 0x00, 0x01, 0x03, 0x07, 0x03, 0x57, 0xff, 0xff, 0xff,
    0x25, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x02, 0x34, 0xc0, 0x09, 0x00, 0x3e, 0x6f, 0x7a, 0x5f, 0x7f, 0x97,
    0x3e, 0x07, 0x40, 0x07, 0x3d, 0x4f, 0x3b, 0x45, 0x7b, 0x04, 0x3a, 0x80, 0x00, 0x54, 0x20, 0x0a,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xff, 0xff, 0xff, 0xff, 0x8f, 0x8f, 0x87, 0xc7, 0x86, 0x80,
    0x00, 0x00, 0x00, 0x55, 0xff, 0xff, 0xff, 0xe0, 0xf8, 0xff, 0xff, 0x3f, 0x0f, 0x01, 0x00, 0x00,
    0x00, 0x00, 0xaa, 0xff, 0xff, 0xff, 0xfb, 0x00, 0x00, 0x00, 0x00, 0x00, 0x09, 0xff, 0xff, 0xff,
    0xd5, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x02, 0x04, 0x0a, 0x00, 0x19, 0x10, 0x20,
    0x08, 0x22, 0x20, 0x08, 0x21, 0x04, 0x10, 0x11, 0x08, 0x02, 0x08, 0x02, 0x01, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x07, 0x0f, 0x1f, 0x1f, 0x0f, 0x07, 0x07, 0x03, 0x07, 0x03,
    0x00, 0x00, 0x00, 0x05, 0x0f, 0x1f, 0x1f, 0x0f, 0x0f, 0x03, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x06, 0x0f, 0x0f, 0x1f, 0x0f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0e, 0x1f, 0x1f, 0x1f,
    0x1e, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
  };


  static const char resolve_color [] PROGMEM = {
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x40, 0x20, 0x00, 0x00, 0x00, 0x08, 0x00,
    0x04, 0x84, 0x84, 0x84, 0x04, 0x00, 0x00, 0x08, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0xe0, 0xf0, 0xf0, 0xf0,
    0xf0, 0xf0, 0xe0, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0xe0, 0xf0, 0xf0, 0xf0, 0x70, 0x70,
    0xf0, 0xf0, 0xe0, 0xc0, 0x80, 0x00, 0x00, 0x00, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xc0, 0xe0, 0xf0, 0xf0, 0x70, 0x70, 0x70, 0xf0, 0xf0, 0xe0,
    0xc0, 0x00, 0x00, 0x00, 0x00, 0xe0, 0xf0, 0xf0, 0xe0, 0xe0, 0xe0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0,
    0xf0, 0xe0, 0xc0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x04, 0x02, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x1e,
    0x3f, 0x7f, 0xff, 0x7f, 0x3f, 0x0a, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xe0, 0xfe, 0xff, 0xff, 0xff, 0x01, 0x00,
    0x03, 0x3f, 0x3f, 0x7f, 0x3c, 0x00, 0x00, 0x00, 0xfc, 0xff, 0xff, 0xff, 0x07, 0x00, 0x00, 0x00,
    0x00, 0x07, 0xff, 0xff, 0xff, 0xfc, 0x00, 0x00, 0x01, 0xff, 0xff, 0xff, 0xff, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0xfe, 0xff, 0xff, 0xff, 0x03, 0x00, 0x00, 0x00, 0x00, 0x0f, 0xff,
    0xff, 0xff, 0xf8, 0x00, 0x00, 0x2f, 0xff, 0xff, 0xff, 0x07, 0xc3, 0xe1, 0xf0, 0xfe, 0x7f, 0x3f,
    0x1f, 0x07, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x30, 0x40, 0x00, 0x00, 0x1c, 0x7e, 0x7f, 0x7f, 0x7f, 0x7f,
    0x3f, 0x06, 0x00, 0x06, 0x1e, 0x3f, 0x7f, 0x6f, 0x5a, 0x36, 0x08, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3f, 0xff, 0xff, 0xff, 0xe0, 0x00, 0x00,
    0x80, 0xf0, 0xf8, 0xf8, 0x78, 0x18, 0x00, 0x00, 0x1f, 0xff, 0xff, 0xff, 0xe0, 0x00, 0x00, 0x00,
    0x80, 0xe0, 0xff, 0xff, 0xff, 0x1f, 0x00, 0x00, 0x00, 0x7f, 0xff, 0xff, 0xff, 0xf0, 0x80, 0xc0,
    0xc0, 0xc0, 0xc0, 0x80, 0x00, 0x1f, 0xff, 0xff, 0xff, 0xe0, 0x00, 0x00, 0x00, 0x80, 0xf0, 0xff,
    0xff, 0xff, 0x0f, 0x00, 0x00, 0x00, 0xff, 0xff, 0xff, 0xff, 0x7f, 0xff, 0xf3, 0xf1, 0xe0, 0xc0,
    0xc0, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x02, 0x04, 0x08, 0x00, 0x10, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x10, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x07, 0x0f, 0x0f, 0x1e, 0x1e,
    0x1f, 0x0f, 0x07, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0x07, 0x0f, 0x0f, 0x0e, 0x1e,
    0x1f, 0x0f, 0x0f, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0x07, 0x0f, 0x1f, 0x0f, 0x0f, 0x07, 0x07,
    0x07, 0x07, 0x03, 0x01, 0x00, 0x00, 0x00, 0x03, 0x07, 0x0f, 0x0f, 0x0e, 0x1e, 0x1f, 0x0f, 0x07,
    0x03, 0x00, 0x00, 0x00, 0x00, 0x04, 0x0f, 0x0f, 0x1f, 0x0f, 0x0c, 0x00, 0x00, 0x01, 0x03, 0x03,
    0x07, 0x0f, 0x0f, 0x0f, 0x0e, 0x04, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
  };

  static const char calc_logo [] PROGMEM = {
    0xff, 0x0f, 0x03, 0x03, 0xe1, 0xf1, 0xf1, 0xf1, 0xf1, 0x71, 0xf1, 0xf1, 0xf1, 0xf1, 0xe1, 0x01,
    0x01, 0xe1, 0xf1, 0xf1, 0xf1, 0xf1, 0xf1, 0xf1, 0xf1, 0xf1, 0xf1, 0xe1, 0x03, 0x03, 0x0f, 0xff,
    0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
    0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
    0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
    0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
    0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
    0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
    0xff, 0x00, 0x00, 0x00, 0x3f, 0x7f, 0x7f, 0x7d, 0x79, 0x60, 0x79, 0x7d, 0x7f, 0x7f, 0x3f, 0x00,
    0x00, 0x3f, 0x7f, 0x7f, 0x7d, 0x7d, 0x7d, 0x7d, 0x7d, 0x7f, 0x7f, 0x3f, 0x00, 0x00, 0x00, 0xff,
    0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
    0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
    0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
    0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
    0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
    0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
    0xff, 0x00, 0x00, 0x00, 0xfc, 0xfe, 0xfe, 0xce, 0x1e, 0x1e, 0x1e, 0xce, 0xfe, 0xfe, 0xfc, 0x00,
    0x00, 0xf8, 0xfc, 0xfe, 0xbe, 0xbe, 0xae, 0xbe, 0xbe, 0xbe, 0xfe, 0xfc, 0x00, 0x00, 0x00, 0xff,
    0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
    0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
    0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
    0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
    0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
    0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
    0xff, 0xf0, 0xc0, 0xc0, 0x87, 0x8f, 0x8f, 0x8e, 0x8e, 0x8f, 0x8e, 0x8e, 0x8f, 0x8f, 0x87, 0x80,
    0x80, 0x87, 0x8f, 0x8f, 0x8f, 0x8f, 0x8f, 0x8f, 0x8f, 0x8f, 0x8f, 0x87, 0xc0, 0xc0, 0xf0, 0xff,
    0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
    0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
    0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
    0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
    0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
    0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff
  };

  // Host Keyboard Layer Status
  //oled_write_P(PSTR("Layer"), false);
  switch (get_highest_layer(layer_state)) {
    case _BL:
      //oled_write_P(PSTR("KAMPAD:\n"), false);
      //oled_write_P(PSTR("BASE\n\n\n"), false);
      oled_write_raw_P(qmk_logo, sizeof(qmk_logo));
      break;
    case _DRE:
      oled_write_raw_P(resolve_edit_logo, sizeof(resolve_edit_logo));
      break;
    case _DRC:
      oled_write_raw_P(resolve_color, sizeof(resolve_color));
//      oled_write_P(PSTR("Davinci Resolve:\n"), false);
//     oled_write_P(PSTR("Color\n\n\n"), false);
      break;
    case _NUMPAD:
      oled_write_raw_P(calc_logo, sizeof(calc_logo));
      break;
    case _SHIFT_1:
      oled_write_P(PSTR("SHIFT\n1\n\n"), false);
      break;
    default:
      // Or use the write_ln shortcut over adding '\n' to the end of your string
      oled_write_P(PSTR("KAMPAD\n\n\n"), false);
  }
}
#endif

// Section to change RGB LED colours and animation when activating layer 1 and 2, and then go back to the default, which I can change on the fly.
// sethsv(h,s,v)

uint32_t layer_state_set_user(uint32_t state)
{
  uint8_t layer = biton32(state);
  //if (prev!=_FN) {
      switch (layer) {
        case _BL:
          rgblight_mode(4);
          rgblight_sethsv(148, 200, 255);
//          reset_hsv();
          break;
        case _DRE:
          rgblight_mode(2);
          rgblight_sethsv(1, 255, 255);
          break;
        case _DRC:
          rgblight_mode(13);
	  reset_hsv();
          break;
        case _NUMPAD:
          rgblight_mode(38);
          rgblight_sethsv(64, 69, 100);
          break;
        case _SHIFT_1:
          rgblight_mode(38);
          rgblight_sethsv(1, 1, 255);
          break;
      }
  prev = layer;
  return state;
}
